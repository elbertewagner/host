;/*FB_PKG_DELIM*/

__d("relay-runtime/store/experimental-live-resolvers/LiveResolverCache",["invariant","Promise","relay-runtime/store/ClientID","relay-runtime/store/RelayModernRecord","relay-runtime/store/RelayModernSelector","relay-runtime/store/RelayRecordSource","relay-runtime/store/RelayResponseNormalizer","relay-runtime/store/RelayStoreUtils","relay-runtime/store/experimental-live-resolvers/LiveResolverSuspenseSentinel","relay-runtime/store/experimental-live-resolvers/getOutputTypeRecordIDs","relay-runtime/store/experimental-live-resolvers/isLiveStateValue","relay-runtime/util/RelayConcreteNode","relay-runtime/util/RelayFeatureFlags","relay-runtime/util/recycleNodesInto","relay-runtime/util/shallowFreeze","warning"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("relay-runtime/util/RelayConcreteNode").RELAY_LIVE_RESOLVER,k=b("relay-runtime/store/ClientID").generateClientID,l=b("relay-runtime/store/ClientID").generateClientObjectClientID,m=b("relay-runtime/store/RelayModernSelector").createNormalizationSelector,n=b("relay-runtime/store/RelayResponseNormalizer").normalize,o=(c=b("relay-runtime/store/RelayStoreUtils")).RELAY_RESOLVER_ERROR_KEY,p=c.RELAY_RESOLVER_INVALIDATION_KEY,q=c.RELAY_RESOLVER_OUTPUT_TYPE_RECORD_IDS,r=c.RELAY_RESOLVER_SNAPSHOT_KEY,s=c.RELAY_RESOLVER_VALUE_KEY,t=c.getStorageKey,u=b("relay-runtime/store/experimental-live-resolvers/LiveResolverSuspenseSentinel").isSuspenseSentinel,v="__resolverLiveStateSubscription",w="__resolverLiveStateValue",x="__resolverLiveStateDirty",y="__RELAY_RESOLVER__",z="__relay_model_instance";function A(a,b,c){var d=a.get(b);d||(d=new Set(),a.set(b,d));d.add(c)}d=function(){function a(a,b){this.$1=new Map(),this.$2=new Map(),this.$3=a,this.$4=b,this.$5=!1,this.$6=null}var c=a.prototype;c.readFromCacheOrEvaluate=function(a,c,d,e,f){var i=this.$3(),l=I(i,a),m=t(c,d);l=(h||(h=b("relay-runtime/store/RelayModernRecord"))).getLinkedRecordID(l,m);var n=l==null?null:i.get(l),p;if(n==null||this.$7(n,f)){n!=null&&H(n);l=(f=l)!=null?f:k(a,m);n=(h||(h=b("relay-runtime/store/RelayModernRecord"))).create(l,y);f=e();h.setValue(n,r,f.snapshot);h.setValue(n,o,f.error);if(c.kind===j){if(f.resolverResult!=null){f.error==null||g(0,71543);e=f.resolverResult;p=this.$8(n,l,e,c,d)}}else p=this.$9(n,f.resolverResult,c,d);i.set(l,n);e=I(i,a);e=h.clone(e);h.setLinkedRecordID(e,m,l);i.set(a,e);if(c.fragment!=null){e=t(c.fragment,d);e=k(a,e);A(this.$1,e,l);A(this.$2,a,e);f=(f=f.snapshot)==null?void 0:f.seenRecords;if(f!=null)for(var f=f,q=Array.isArray(f),s=0,f=q?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v;if(q){if(s>=f.length)break;v=f[s++]}else{s=f.next();if(s.done)break;v=s.value}v=v;A(this.$2,v,e)}}}else if(c.kind===j&&(h||(h=b("relay-runtime/store/RelayModernRecord"))).getValue(n,x)){l=(v=l)!=null?v:k(a,m);n=(h||(h=b("relay-runtime/store/RelayModernRecord"))).clone(n);s=h.getValue(n,w);b("relay-runtime/store/experimental-live-resolvers/isLiveStateValue")(s)||g(0,64172,c.path,JSON.stringify(n));p=this.$10(n,s,c,d);h.setValue(n,x,!1);i.set(l,n)}q=this.$11(n);f=h.getValue(n,r);e=h.getValue(n,o);v=null;if(u(q)){v=(s=l)!=null?s:k(a,m)}return[q,l,e,f,v,p]};c.getLiveResolverPromise=function(a){var c=this.$3();c=c.get(a);c!=null||g(0,59681);var d=(h||(h=b("relay-runtime/store/RelayModernRecord"))).getValue(c,w);return new(i||(i=b("Promise")))(function(a){var b=d.subscribe(function(){b(),a()})})};c.$8=function(a,c,d,e,f){c=this.$12(c);c=d.subscribe(c);(h||(h=b("relay-runtime/store/RelayModernRecord"))).setValue(a,w,d);d=this.$10(a,d,e,f);h.setValue(a,x,!1);h.setValue(a,v,c);return d};c.$12=function(a){var c=this;return function(){var d=c.$3();d=d.get(a);if(!d)return;if(!(h||(h=b("relay-runtime/store/RelayModernRecord"))).hasValue(d,w)){b("warning")(!1,"Unexpected callback for a incomplete live resolver record (__id: `%s`). The record has missing live state value. This is a no-op and indicates a memory leak, and possible bug in Relay Live Resolvers. Possible cause: The original record was GC-ed, or was created with the optimistic record source. Record details: `%s`.",a,JSON.stringify(d));return}d=(h||(h=b("relay-runtime/store/RelayModernRecord"))).clone(d);h.setValue(d,x,!0);c.$13(a,d)}};c.$13=function(a,c){if(this.$5)this.$6==null&&(this.$6=b("relay-runtime/store/RelayRecordSource").create()),this.$6.set(a,c);else{var d=b("relay-runtime/store/RelayRecordSource").create();d.set(a,c);this.$4.publish(d);this.$4.notify()}};c.batchLiveStateUpdates=function(a){this.$5&&g(0,65685);this.$5=!0;try{a()}finally{this.$6!=null&&(this.$4.publish(this.$6),this.$4.notify()),this.$6=null,this.$5=!1}};c.$10=function(a,c,d,e){var f=null,g=null;try{f=c.read()}catch(a){g=a}(h||(h=b("relay-runtime/store/RelayModernRecord"))).setValue(a,o,g);return this.$9(a,f,d,e)};c.$9=function(a,c,d,e){var f=d.normalizationInfo,i=null;if(c!=null&&f!=null&&!u(c)){var j,k=b("relay-runtime/store/experimental-live-resolvers/getOutputTypeRecordIDs")(a),m=new Set(),n=this.$3();if(f.plural){Array.isArray(c)||g(0,65023);j=[];var o=b("relay-runtime/store/RelayRecordSource").create();for(var p=0;p<c.length;p++){var r=c[p];if(r==null)continue;typeof r==="object"||g(0,65024);var t=J(f,r),v=l(t,(h||(h=b("relay-runtime/store/RelayModernRecord"))).getDataID(a),p);r=this.$14(v,r,e,f,[d.path,String(p)],t);for(var t=r.getRecordIDs(),w=Array.isArray(t),x=0,t=w?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var y;if(w){if(x>=t.length)break;y=t[x++]}else{x=t.next();if(x.done)break;y=x.value}y=y;o.set(y,I(r,y));m.add(y)}j.push(v)}i=B(n,o,k)}else{typeof c==="object"||g(0,65024);y=J(f,c);x=l(y,(h||(h=b("relay-runtime/store/RelayModernRecord"))).getDataID(a));w=this.$14(x,c,e,f,[d.path],y);for(t=w.getRecordIDs(),r=Array.isArray(t),v=0,t=r?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(r){if(v>=t.length)break;p=t[v++]}else{v=t.next();if(v.done)break;p=v.value}o=p;m.add(o)}j=x;i=B(n,w,k)}(h||(h=b("relay-runtime/store/RelayModernRecord"))).setValue(a,q,m);b("relay-runtime/util/shallowFreeze")(j);h.setValue(a,s,j)}else b("relay-runtime/util/shallowFreeze")(c),(h||(h=b("relay-runtime/store/RelayModernRecord"))).setValue(a,s,c);return i};c.notifyUpdatedSubscribers=function(a){this.$4.__notifyUpdatedSubscribers(a)};c.$11=function(a){return(h||(h=b("relay-runtime/store/RelayModernRecord"))).getValue(a,s)};c.invalidateDataIDs=function(a){var b=this.$3(),c=new Set(),d=Array.from(a);while(d.length){var e=d.pop();a.add(e);e=this.$2.get(e);if(e==null)continue;for(var e=e,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;if(!c.has(h)){h=this.$1.get(h);if(h==null)continue;for(var h=h,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{j=h.next();if(j.done)break;k=j.value}k=k;D(k,b);c.has(k)||d.push(k)}}}}};c.$7=function(a,c){if(!(h||(h=b("relay-runtime/store/RelayModernRecord"))).getValue(a,p))return!1;var d=(h||(h=b("relay-runtime/store/RelayModernRecord"))).getValue(a,r),e=d==null?void 0:d.data;d=d==null?void 0:d.selector;if(e==null||d==null){b("warning")(!1,"Expected previous inputs and reader selector on resolver record with ID %s, but they were missing.",(h||(h=b("relay-runtime/store/RelayModernRecord"))).getDataID(a));return!0}c=c(d);d=c.data;c=b("relay-runtime/util/recycleNodesInto")(e,d);if(c!==e)return!0;if(b("relay-runtime/util/RelayFeatureFlags").MARK_RESOLVER_VALUES_AS_CLEAN_AFTER_FRAGMENT_REREAD){d=(h||(h=b("relay-runtime/store/RelayModernRecord"))).clone(a);h.setValue(d,p,!1);c=this.$3();c.set(h.getDataID(a),d)}return!1};c.$14=function(a,c,d,e,f,i){var j=b("relay-runtime/store/RelayRecordSource").create();switch(e.kind){case"OutputType":var k=(h||(h=b("relay-runtime/store/RelayModernRecord"))).create(a,i);j.set(a,k);k=m(e.normalizationNode,a,d);d=this.$4.__getNormalizationOptions(f);return n(j,k,c,d).source;case"WeakModel":f=(h||(h=b("relay-runtime/store/RelayModernRecord"))).create(a,i);h.setValue(f,z,c);j.set(a,f);return j;default:e.kind,g(0,79414,e.kind)}};c.ensureClientRecord=function(a,c){var d=l(c,a),e=this.$3();if(!e.has(d)){c=(h||(h=b("relay-runtime/store/RelayModernRecord"))).create(d,c);h.setValue(c,"id",a);e.set(d,c)}return d};c.unsubscribeFromLiveResolverRecords=function(a){return F(this.$3(),a)};c.invalidateResolverRecords=function(a){if(a.size===0)return;for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=this.$3().get(d);e!=null&&G(e)&&this.$3()["delete"](d)}};return a}();function B(a,c,d){var e=new Set();if(d!=null)for(var d=d,f=Array.isArray(d),g=0,d=f?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=d.length)break;i=d[g++]}else{g=d.next();if(g.done)break;i=g.value}i=i;c.has(i)||(e.add(i),a.remove(i))}for(i=c.getRecordIDs(),g=Array.isArray(i),f=0,i=g?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=i.length)break;d=i[f++]}else{f=i.next();if(f.done)break;d=f.value}d=d;var j=I(c,d);if(a.has(d)){var k=I(a,d),l=(h||(h=b("relay-runtime/store/RelayModernRecord"))).update(k,j);l!==k&&(e.add(d),a.set(d,l),E(k,a))}else a.set(d,j)}return e}function C(a){var c=new Set();(h||(h=b("relay-runtime/store/RelayModernRecord"))).getFields(a).forEach(function(d){if((h||(h=b("relay-runtime/store/RelayModernRecord"))).hasLinkedRecordID(a,d)){var e=(h||(h=b("relay-runtime/store/RelayModernRecord"))).getLinkedRecordID(a,d);e!=null&&c.add(e)}else if((h||(h=b("relay-runtime/store/RelayModernRecord"))).hasLinkedRecordIDs(a,d)){(e=(h||(h=b("relay-runtime/store/RelayModernRecord"))).getLinkedRecordIDs(a,d))==null?void 0:e.forEach(function(a){a!=null&&c.add(a)})}});return c}function D(a,c){var d=c.get(a);if(!d){b("warning")(!1,"Expected a resolver record with ID %s, but it was missing.",a);return}d=(h||(h=b("relay-runtime/store/RelayModernRecord"))).clone(d);h.setValue(d,p,!0);c.set(a,d)}function E(a,b){a=C(a);for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=b.get(e);f!=null&&G(f)&&D(e,b)}}function F(a,b){if(b.size===0)return;for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e=a.get(e);e!=null&&G(e)&&H(e)}}function G(a){return(h||(h=b("relay-runtime/store/RelayModernRecord"))).getType(a)===y}function H(a){a=(h||(h=b("relay-runtime/store/RelayModernRecord"))).getValue(a,v);a!=null&&a()}function I(a,b){a=a.get(b);a!=null||g(0,65242,b);return a}function a(a){return a}function J(a,b){a=(a=a.concreteType)!=null?a:b.__typename;a!=null||g(0,66856);return a}e.exports={LiveResolverCache:d,getUpdatedDataIDs:a,RELAY_RESOLVER_LIVE_STATE_SUBSCRIPTION_KEY:v}}),null);
__d("relay-runtime/store/experimental-live-resolvers/LiveResolverStore",["invariant","regeneratorRuntime","relay-runtime/multi-actor-environment/ActorIdentifier","relay-runtime/store/DataChecker","relay-runtime/store/RelayModernRecord","relay-runtime/store/RelayOptimisticRecordSource","relay-runtime/store/RelayReader","relay-runtime/store/RelayReferenceMarker","relay-runtime/store/RelayStoreSubscriptions","relay-runtime/store/RelayStoreUtils","relay-runtime/store/defaultGetDataID","relay-runtime/store/experimental-live-resolvers/LiveResolverCache","relay-runtime/util/deepFreeze","relay-runtime/util/resolveImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("relay-runtime/multi-actor-environment/ActorIdentifier").INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,k=b("relay-runtime/multi-actor-environment/ActorIdentifier").assertInternalActorIdentifier,l=b("relay-runtime/store/RelayStoreUtils").ROOT_ID,m=b("relay-runtime/store/RelayStoreUtils").ROOT_TYPE,n=b("relay-runtime/store/experimental-live-resolvers/LiveResolverCache").LiveResolverCache,o=b("relay-runtime/store/experimental-live-resolvers/LiveResolverCache").RELAY_RESOLVER_LIVE_STATE_SUBSCRIPTION_KEY,p=b("relay-runtime/store/experimental-live-resolvers/LiveResolverCache").getUpdatedDataIDs,q=10;a=function(){function a(a,c){var d=this,e;this.$26=function(){d.$4&&(d.$4.next().done?d.$4=null:d.$5(d.$26))};this.$1=0;this.$2=0;this.$3=(e=c==null?void 0:c.gcReleaseBufferSize)!=null?e:q;this.$4=null;this.$5=(e=c==null?void 0:c.gcScheduler)!=null?e:b("relay-runtime/util/resolveImmediate");this.$6=(e=c==null?void 0:c.getDataID)!=null?e:b("relay-runtime/store/defaultGetDataID");this.$7=null;this.$8=new Set();this.$9=new Set();this.__log=(e=c==null?void 0:c.log)!=null?e:null;this.$10=c==null?void 0:c.queryCacheExpirationTime;this.$11=(e=c==null?void 0:c.operationLoader)!=null?e:null;this.$12=null;this.$13=a;this.$15=[];this.$16=new Map();this.$17=!1;this.$14=new n(function(){return d.$23()},this);this.$18=new(b("relay-runtime/store/RelayStoreSubscriptions"))(c==null?void 0:c.log,this.$14);this.$19=new Set();this.$21=(e=c==null?void 0:c.treatMissingFieldsAsNull)!=null?e:!1;this.$20=c==null?void 0:c.actorIdentifier;this.$22=(a=c==null?void 0:c.shouldProcessClientComponents)!=null?a:!1;r(this.$13)}var c=a.prototype;c.getSource=function(){var a;return(a=this.$12)!=null?a:this.$13};c.$23=function(){var a;return(a=this.$12)!=null?a:this.$13};c.getLiveResolverPromise=function(a){return this.$14.getLiveResolverPromise(a)};c.batchLiveStateUpdates=function(a){this.__log!=null&&this.__log({name:"liveresolver.batch.start"});try{this.$14.batchLiveStateUpdates(a)}finally{this.__log!=null&&this.__log({name:"liveresolver.batch.end"})}};c.check=function(a,c){var d,e,f=a.root,g=this.$23(),h=this.$7;a=this.$16.get(a.request.identifier);var i=a!=null?a.epoch:null;if(h!=null&&(i==null||i<=h))return{status:"stale"};h=(h=c==null?void 0:c.handlers)!=null?h:[];d=(d=c==null?void 0:c.getSourceForActor)!=null?d:function(a){k(a);return g};e=(e=c==null?void 0:c.getTargetForActor)!=null?e:function(a){k(a);return g};e=b("relay-runtime/store/DataChecker").check(d,e,(d=c==null?void 0:c.defaultActorIdentifier)!=null?d:j,f,h,this.$11,this.$6,this.$22);return t(e,i,a==null?void 0:a.fetchTime,this.$10)};c.retain=function(a){var b=this,c=a.request.identifier,d=!1,e=function(){if(d)return;d=!0;var a=b.$16.get(c);if(a==null)return;a.refCount--;if(a.refCount===0){var e=b.$10;a=a.fetchTime!=null&&e!=null&&a.fetchTime<=Date.now()-e;if(a)b.$16["delete"](c),b.scheduleGC();else{b.$15.push(c);if(b.$15.length>b.$3){e=b.$15.shift();b.$16["delete"](e);b.scheduleGC()}}}},f=this.$16.get(c);f!=null?(f.refCount===0&&(this.$15=this.$15.filter(function(a){return a!==c})),f.refCount+=1):this.$16.set(c,{operation:a,refCount:1,epoch:null,fetchTime:null});return{dispose:e}};c.lookup=function(a){var c=this.getSource();c=b("relay-runtime/store/RelayReader").read(c,a,this.$14);return c};c.notify=function(a,b){var c=this,d=this.__log;d!=null&&d({name:"store.notify.start",sourceOperation:a});this.$1++;b===!0&&(this.$7=this.$1);this.$14.invalidateDataIDs(this.$19);var e=this.getSource(),f=[];this.$18.updateSubscriptions(e,this.$19,f,a);this.$8.forEach(function(a){c.$24(a,b===!0)});d!=null&&d({name:"store.notify.complete",sourceOperation:a,updatedRecordIDs:this.$19,invalidatedRecordIDs:this.$9});this.$19.clear();this.$9.clear();if(a!=null){e=a.request.identifier;d=this.$16.get(e);if(d!=null)d.epoch=this.$1,d.fetchTime=Date.now();else if(a.request.node.params.operationKind==="query"&&this.$3>0&&this.$15.length<this.$3){d={operation:a,refCount:0,epoch:this.$1,fetchTime:Date.now()};this.$15.push(e);this.$16.set(e,d)}}return f};c.publish=function(a,b){var c=this.$23();s(c,a,this.$1+1,b,this.$19,this.$9);b=this.__log;b!=null&&b({name:"store.publish",source:a,optimistic:c===this.$12})};c.subscribe=function(a,b){return this.$18.subscribe(a,b)};c.holdGC=function(){var a=this;this.$4&&(this.$4=null,this.$17=!0);this.$2++;var b=function(){a.$2>0&&(a.$2--,a.$2===0&&a.$17&&(a.scheduleGC(),a.$17=!1))};return{dispose:b}};c.toJSON=function(){return"LiveResolverStore()"};c.getEpoch=function(){return this.$1};c.__getUpdatedRecordIDs=function(){return this.$19};c.lookupInvalidationState=function(a){var c=this,d=new Map();a.forEach(function(a){var e=c.getSource().get(a);d.set(a,(a=(h||(h=b("relay-runtime/store/RelayModernRecord"))).getInvalidationEpoch(e))!=null?a:null)});d.set("global",this.$7);a={dataIDs:a,invalidations:d};return a};c.checkInvalidationState=function(a){var b=this.lookupInvalidationState(a.dataIDs);b=b.invalidations;var c=a.invalidations;if(b.get("global")!==c.get("global"))return!0;for(var a=a.dataIDs,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(b.get(f)!==c.get(f))return!0}return!1};c.subscribeToInvalidationState=function(a,b){var c=this,d={callback:b,invalidationState:a};b=function(){c.$8["delete"](d)};this.$8.add(d);return{dispose:b}};c.$24=function(a,b){var c=this,d=a.callback;a=a.invalidationState;a=a.dataIDs;b=b||a.some(function(a){return c.$9.has(a)});if(!b)return;d()};c.snapshot=function(){this.$12==null||g(0,57727);var a=this.__log;a!=null&&a({name:"store.snapshot"});this.$18.snapshotSubscriptions(this.getSource());this.$4&&(this.$4=null,this.$17=!0);this.$12=b("relay-runtime/store/RelayOptimisticRecordSource").create(this.getSource())};c.restore=function(){var a=this.$12;a||g(0,57728);var c=this.__log;c!=null&&c({name:"store.restore"});c=b("relay-runtime/store/RelayOptimisticRecordSource").getOptimisticRecordIDs(a);this.$14.unsubscribeFromLiveResolverRecords(c);this.$12=null;this.$17&&this.scheduleGC();this.$18.restoreSubscriptions();this.$14.invalidateResolverRecords(c)};c.scheduleGC=function(){if(this.$2>0){this.$17=!0;return}if(this.$4)return;this.$4=this.$25();this.$5(this.$26)};c.__gc=function(){if(this.$12!=null)return;var a=this.$25();while(!a.next().done);};c.$25=b("regeneratorRuntime").mark(function a(){var c,d,e,f,g,i,j,k,l,m,n,p,q,r,s;return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:c=this.__log;case 1:c!=null&&c({name:"store.gc.start"}),d=this.$1,e=new Set(),(f=this.$16.values(),g=Array.isArray(f),i=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 6:if(!g){a.next=12;break}if(!(i>=f.length)){a.next=9;break}return a.abrupt("break",27);case 9:j=f[i++];a.next=16;break;case 12:i=f.next();if(!i.done){a.next=15;break}return a.abrupt("break",27);case 15:j=i.value;case 16:k=j;l=k.operation;m=l.root;b("relay-runtime/store/RelayReferenceMarker").mark(this.$13,m,e,this.$11,this.$22);a.next=22;return;case 22:if(!(d!==this.$1)){a.next=25;break}c!=null&&c({name:"store.gc.interrupted"});return a.abrupt("continue",1);case 25:a.next=6;break;case 27:if(e.size===0)this.$13.clear();else{n=this.$13.getRecordIDs();for(p=0;p<n.length;p++)q=n[p],e.has(q)||(r=this.$13.get(q),r!=null&&(s=(h||(h=b("relay-runtime/store/RelayModernRecord"))).getValue(r,o),s!=null&&s()),this.$13.remove(q))}c!=null&&c({name:"store.gc.end",references:e});return a.abrupt("return");case 32:case"end":return a.stop()}},a,this)});c.__getNormalizationOptions=function(a){return{path:a,getDataID:this.$6,treatMissingFieldsAsNull:this.$21,shouldProcessClientComponents:this.$22,actorIdentifier:this.$20}};c.__notifyUpdatedSubscribers=function(a){a=p(a);var b=this.$19;this.$19=a;this.notify();this.$19=b};return a}();function r(a){if(!a.has(l)){var c=(h||(h=b("relay-runtime/store/RelayModernRecord"))).create(l,m);a.set(l,c)}}function s(a,c,d,e,f,g){e&&e.forEach(function(e){var i=a.get(e),f=c.get(e);if(f===null)return;i!=null?i=(h||(h=b("relay-runtime/store/RelayModernRecord"))).clone(i):i=f!=null?(h||(h=b("relay-runtime/store/RelayModernRecord"))).clone(f):null;if(!i)return;(h||(h=b("relay-runtime/store/RelayModernRecord"))).setValue(i,b("relay-runtime/store/RelayStoreUtils").INVALIDATED_AT_KEY,d);g.add(e);a.set(e,i)});e=c.getRecordIDs();for(var i=0;i<e.length;i++){var j=e[i],k=c.get(j),l=a.get(j);if(k&&l){var m=(h||(h=b("relay-runtime/store/RelayModernRecord"))).update(l,k);m!==l&&(f.add(j),a.set(j,m))}else k===null?(a["delete"](j),l!==null&&f.add(j)):k&&(a.set(j,k),f.add(j))}}function t(a,b,c,d){var e=a.mostRecentlyInvalidatedAt;a=a.status;if(typeof e==="number"&&(b==null||e>b))return{status:"stale"};if(a==="missing")return{status:"missing"};if(c!=null&&d!=null){e=c<=Date.now()-d;if(e)return{status:"stale"}}return{status:"available",fetchTime:(b=c)!=null?b:null}}e.exports=a}),null);
__d("CometLiveResolverStore",["relay-runtime","relay-runtime/store/experimental-live-resolvers/LiveResolverStore"],(function(a,b,c,d,e,f,g){"use strict";g.Store=c("relay-runtime/store/experimental-live-resolvers/LiveResolverStore"),g.RecordSource=d("relay-runtime").RecordSource}),98);
__d("CometRelayEnvironmentProvider",["CometRelay","CometRelayEnvironment","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children;a=a.environment;return i.jsx(d("CometRelay").RelayEnvironmentProvider,{environment:a||c("CometRelayEnvironment"),children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("setTimeoutCometSpeculative",["JSScheduler","setTimeoutCometInternals"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){for(var c=arguments.length,e=new Array(c>2?c-2:0),f=2;f<c;f++)e[f-2]=arguments[f];return d("setTimeoutCometInternals").setTimeoutAtPriority_DO_NOT_USE.apply(d("setTimeoutCometInternals"),[(h||(h=d("JSScheduler"))).priorities.unstable_Idle,a,b].concat(e))}g["default"]=a}),98);